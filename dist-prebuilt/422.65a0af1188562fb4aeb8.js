(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[422],{95422:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var n=a(37703),r=a(80801),s=a(87271),i=a(69797),o=a(45697),l=a.n(o),c=(a(15306),a(67294)),p=a(44012);const d=a.p+"files/f11923249bb5ce824412293db70b41c6.png",m=a.p+"files/8ebc3de624236f26484a5105810be65f.png",h=a.p+"files/e9f9a38a54794f26d712ff61c30394d4.svg";var g=a(45288),u=a(1011),f=a(91384),b=a(78274),E=a(74935),k=a(47470);function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}class L extends c.PureComponent{constructor(e){super(e),w(this,"clearLandingPreferenceIfNotChecked",(()=>{this.state.navigating||f.Z.clearLandingPreference(this.props.siteUrl)})),w(this,"checkLandingPreferenceBrowser",(()=>{const e=f.Z.getLandingPreference(this.props.siteUrl);return e&&e===b.PH.BROWSER})),w(this,"checkLandingPreferenceApp",(()=>{const e=f.Z.getLandingPreference(this.props.siteUrl);return e&&e===b.PH.MATTERMOSTAPP})),w(this,"handleChecked",(()=>{this.state.rememberChecked&&f.Z.clearLandingPreference(this.props.siteUrl),this.setState({rememberChecked:!this.state.rememberChecked})})),w(this,"setPreference",((e,t)=>{if(this.state.rememberChecked)switch(e){case b.PH.MATTERMOSTAPP:f.Z.setLandingPreferenceToMatterFOSSApp(this.props.siteUrl);break;case b.PH.BROWSER:f.Z.setLandingPreferenceToBrowser(this.props.siteUrl)}else t&&f.Z.clearLandingPreference(this.props.siteUrl)})),w(this,"openMatterFOSSApp",(()=>{this.setPreference(b.PH.MATTERMOSTAPP),this.setState({redirectPage:!0}),window.location.href=this.state.nativeLocation})),w(this,"openInBrowser",(()=>{this.setPreference(b.PH.BROWSER),window.location.href=this.state.location})),w(this,"renderSystemDialogMessage",(()=>k.tq()?c.createElement(p.Z,{id:"get_app.systemDialogMessageMobile",defaultMessage:"View in App"}):c.createElement(p.Z,{id:"get_app.systemDialogMessage",defaultMessage:"View in Desktop App"}))),w(this,"renderGoNativeAppMessage",(()=>c.createElement("a",{href:E.tq()?"#":this.state.nativeLocation,onMouseDown:()=>{this.setPreference(b.PH.MATTERMOSTAPP,!0)},onClick:()=>{if(this.setState({redirectPage:!0,navigating:!0}),E.tq()){if(k.eL()){const e=setTimeout((()=>{window.location.replace(this.getDownloadLink())}),2e3);window.addEventListener("blur",(()=>{clearTimeout(e)}))}window.location.replace(this.state.nativeLocation)}},className:"btn btn-primary btn-lg get-app__download"},this.renderSystemDialogMessage()))),w(this,"getDownloadLink",(()=>k.Vg()?this.props.iosAppLink:k.eL()?this.props.androidAppLink:this.props.desktopAppLink)),w(this,"handleBrandImageError",(()=>{this.setState({brandImageError:!0})})),w(this,"renderCheckboxIcon",(()=>this.state.rememberChecked?c.createElement(u.Z,null):null)),w(this,"renderGraphic",(()=>k.tq()?c.createElement("img",{src:m}):c.createElement("img",{src:d}))),w(this,"renderDownloadLinkText",(()=>k.tq()?c.createElement(p.Z,{id:"get_app.dontHaveTheMobileApp",defaultMessage:"Don't have the Mobile App?"}):c.createElement(p.Z,{id:"get_app.dontHaveTheDesktopApp",defaultMessage:"Don't have the Desktop App?"}))),w(this,"renderDownloadLinkSection",(()=>{const e=this.getDownloadLink();return this.state.redirectPage?c.createElement("div",{className:"get-app__download-link"},c.createElement(g.Z,{id:"get_app.openLinkInBrowser",defaultMessage:"Or, [open this link in your browser.](!{link})",values:{link:this.state.location}})):e?c.createElement("div",{className:"get-app__download-link"},this.renderDownloadLinkText()," ",c.createElement("br",null),c.createElement("a",{href:e},c.createElement(p.Z,{id:"get_app.downloadTheAppNow",defaultMessage:"Download the app now."}))):null})),w(this,"renderDialogHeader",(()=>{const e=this.getDownloadLink(),t=k.tq();let a=c.createElement(p.Z,{id:"get_app.openingLink",defaultMessage:"Opening link in MatterFOSS..."});if(this.props.enableCustomBrand&&(a=c.createElement(p.Z,{id:"get_app.openingLinkWhiteLabel",defaultMessage:"Opening link in the Desktop App..."})),this.state.redirectPage)return c.createElement("div",{className:"get-app__launching"},a,c.createElement("div",{className:"get-app__alternative".concat(this.state.redirectPage?" redirect-page":"")},c.createElement(p.Z,{id:"get_app.redirectedInMoments",defaultMessage:"You will be redirected in a few moments."}),c.createElement("br",null),this.renderDownloadLinkText()," ",c.createElement("br",{className:"mobile-only"}),c.createElement("a",{href:e},c.createElement(p.Z,{id:"get_app.downloadTheAppNow",defaultMessage:"Download the app now."}))));let n=c.createElement(p.Z,{id:"get_app.ifNothingPrompts",defaultMessage:"You can view {siteName} in the desktop app or continue in your web browser.",values:{siteName:this.props.enableCustomBrand?"":" MatterFOSS"}});return t&&(n=c.createElement(p.Z,{id:"get_app.ifNothingPromptsMobile",defaultMessage:"You can view {siteName} in the mobile app or continue in your web browser.",values:{siteName:this.props.enableCustomBrand?"":" MatterFOSS"}})),c.createElement("div",{className:"get-app__launching"},c.createElement(p.Z,{id:"get_app.launching",defaultMessage:"Where would you like to view this?"}),c.createElement("div",{className:"get-app__alternative"},n))})),w(this,"renderDialogBody",(()=>this.state.redirectPage?c.createElement("div",{className:"get-app__dialog-body"},this.renderDialogHeader(),this.renderDownloadLinkSection()):c.createElement("div",{className:"get-app__dialog-body"},this.renderDialogHeader(),c.createElement("div",{className:"get-app__buttons"},c.createElement("div",{className:"get-app__status"},this.renderGoNativeAppMessage()),c.createElement("div",{className:"get-app__status"},c.createElement("a",{href:this.state.location,onMouseDown:()=>{this.setPreference(b.PH.BROWSER,!0)},onClick:()=>{this.setState({navigating:!0})},className:"btn btn-default btn-lg get-app__continue"},c.createElement(p.Z,{id:"get_app.continueToBrowser",defaultMessage:"View in Browser"})))),c.createElement("div",{className:"get-app__preference"},c.createElement("button",{className:"get-app__checkbox ".concat(this.state.rememberChecked?"checked":""),onClick:this.handleChecked},this.renderCheckboxIcon()),c.createElement(p.Z,{id:"get_app.rememberMyPreference",defaultMessage:"Remember my preference"})),this.renderDownloadLinkSection()))),w(this,"renderHeader",(()=>{let e=c.createElement("div",{className:"get-app__header"},c.createElement("img",{src:h,className:"get-app__logo"}));if(this.props.enableCustomBrand&&this.props.brandImageUrl){let t;this.props.brandImageUrl&&!this.state.brandImageError&&(t=c.createElement("img",{src:this.props.brandImageUrl,onError:this.handleBrandImageError,className:"get-app__custom-logo"})),e=c.createElement("div",{className:"get-app__header"},t,c.createElement("div",{className:"get-app__custom-site-name"},c.createElement("span",null,this.props.siteName)))}return e}));const t=window.location.href.replace("/landing#","");this.state={rememberChecked:!1,redirectPage:!1,location:t,nativeLocation:t.replace(/^(https|http)/,"matterfoss"),brandImageError:!1,navigating:!1},E.tq()&&!f.Z.hasSeenLandingPage()&&f.Z.setLandingPageSeen(!0)}componentDidMount(){E._v(this.props.defaultTheme),this.checkLandingPreferenceApp()&&this.openMatterFOSSApp(),window.addEventListener("beforeunload",this.clearLandingPreferenceIfNotChecked)}componentWillUnmount(){window.removeEventListener("beforeunload",this.clearLandingPreferenceIfNotChecked)}render(){const e=k.tq();return this.checkLandingPreferenceBrowser()?(this.openInBrowser(),null):c.createElement("div",{className:"get-app"},this.renderHeader(),c.createElement("div",{className:"get-app__dialog"},c.createElement("div",{className:"get-app__graphic ".concat(e?"mobile":"")},this.renderGraphic()),this.renderDialogBody()))}}w(L,"propTypes",{defaultTheme:l().any.isRequired,desktopAppLink:l().string,iosAppLink:l().string,androidAppLink:l().string,siteUrl:l().string,siteName:l().string,brandImageUrl:l().string,enableCustomBrand:l().bool.isRequired});const _=(0,n.connect)((function(e){const t=(0,s.iE)(e);return{desktopAppLink:t.AppDownloadLink,iosAppLink:t.IosAppDownloadLink,androidAppLink:t.AndroidAppDownloadLink,defaultTheme:(0,i.gh)(e),siteUrl:t.SiteURL,siteName:t.SiteName,brandImageUrl:r.je.getBrandImageUrl("0"),enableCustomBrand:"true"===t.EnableCustomBrand}}))(L)},1011:(e,t,a)=>{"use strict";a.d(t,{Z:()=>r});var n=a(67294);class r extends n.PureComponent{render(){return n.createElement("svg",{width:"18px",height:"18px",viewBox:"0 0 18 18"},n.createElement("g",{id:"Developer-Export",stroke:"none",strokeWidth:"1",fillRule:"evenodd"},n.createElement("g",{transform:"translate(-285.000000, -933.000000)",id:"All-Team-Members"},n.createElement("g",{transform:"translate(245.000000, 698.000000)"},n.createElement("g",{id:"Channel-Administrators",transform:"translate(0.000000, 106.000000)"},n.createElement("g",{id:"data-table/column-1",transform:"translate(11.000000, 86.000000)"},n.createElement("g",{id:"row-checkbox---Public-Channels",transform:"translate(12.000000, 35.000000)"},n.createElement("g",{id:"Stacked-Group",transform:"translate(0.000000, 5.000000)"},n.createElement("g",{id:"data-table/1st/row-checkbox-label-base"},n.createElement("g",{id:"check-on-copy-11",transform:"translate(14.000000, 0.000000)"},n.createElement("path",{d:"M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 L19,3 Z M10,17 L5,12.1923077 L6.4,10.8461538 L10,14.3076923 L17.6,7 L19,8.34615385 L10,17 L10,17 Z",id:"checkbox---checked"})))))))))))}}}}]);
//# sourceMappingURL=422.65a0af1188562fb4aeb8.js.map