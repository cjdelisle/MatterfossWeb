(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[385],{65606:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Z});var r=a(37703),s=a(87271),n=a(58371),l=a(74935),o=a(45697),i=a.n(o),c=(a(33948),a(60285),a(64765),a(39714),a(82011)),m=a(67294),u=a(44012),d=a(73727),g=a(78274),E=a(37668);const _=({type:e,title:t})=>{let a=null;if(e)switch(e){case g.vU.LOCAL_STORAGE:a=m.createElement(u.Z,{id:"error.local_storage.title",defaultMessage:"Cannot Load MatterFOSS"});break;case g.vU.PERMALINK_NOT_FOUND:a=m.createElement(u.Z,{id:"permalink.error.title",defaultMessage:"Message Not Found"});break;case g.vU.OAUTH_ACCESS_DENIED:a=m.createElement(u.Z,{id:"error.oauth_access_denied.title",defaultMessage:"Authorization Error"});break;case g.vU.OAUTH_MISSING_CODE:a=m.createElement(u.Z,{id:"error.oauth_missing_code.title",defaultMessage:"MatterFOSS Needs Your Help"});break;case g.vU.OAUTH_INVALID_REDIRECT_URL:case g.vU.OAUTH_INVALID_PARAM:a=m.createElement(u.Z,{id:"error.oauth_invalid_param.title",defaultMessage:"OAuth Parameter Error"});break;case g.vU.TEAM_NOT_FOUND:a=m.createElement(u.Z,{id:"error.team_not_found.title",defaultMessage:"Team Not Found"});break;case g.vU.CHANNEL_NOT_FOUND:a=m.createElement(u.Z,{id:"error.channel_not_found.title",defaultMessage:"Channel Not Found"});break;case g.vU.PAGE_NOT_FOUND:default:a=m.createElement(u.Z,{id:"error.not_found.title",defaultMessage:"Page Not Found"})}else a=t||l._u("error.generic.title","Error");return a};_.propTypes={type:i().oneOfType([i().string,i().oneOf([null])]),title:i().string.isRequired};const h=_;var f=a(82251),p=a(47675);const N=({type:e,message:t,service:a,isGuest:r})=>{let s=null;if(e)switch(e){case g.vU.LOCAL_STORAGE:s=m.createElement("div",null,m.createElement(u.Z,{id:"error.local_storage.message",defaultMessage:"MatterFOSS was unable to load because a setting in your browser prevents the use of its local storage features. To allow MatterFOSS to load, try the following actions:"}),m.createElement("ul",null,m.createElement("li",null,m.createElement(u.Z,{id:"error.local_storage.help1",defaultMessage:"Enable cookies"})),m.createElement("li",null,m.createElement(u.Z,{id:"error.local_storage.help2",defaultMessage:"Turn off private browsing"})),m.createElement("li",null,m.createElement(u.Z,{id:"error.local_storage.help3",defaultMessage:"Use a supported browser (IE 11, Chrome 61+, Firefox 60+, Safari 12+, Edge 42+)"}))));break;case g.vU.PERMALINK_NOT_FOUND:s=m.createElement("p",null,m.createElement(u.Z,{id:"permalink.error.access",defaultMessage:"Permalink belongs to a deleted message or to a channel to which you do not have access."}));break;case g.vU.TEAM_NOT_FOUND:s=m.createElement("p",null,m.createElement(u.Z,{id:"error.team_not_found.message",defaultMessage:"The team you're requesting is private or does not exist. Please contact your Administrator for an invitation."}));break;case g.vU.CHANNEL_NOT_FOUND:s=m.createElement("p",null,r?m.createElement(u.Z,{id:"error.channel_not_found.message_guest",defaultMessage:"Your guest account has no channels assigned. Please contact an administrator."}):m.createElement(u.Z,{id:"error.channel_not_found.message",defaultMessage:"The channel you're requesting is private or does not exist. Please contact an Administrator to be added to the channel."}));break;case g.vU.OAUTH_MISSING_CODE:s=m.createElement("div",null,m.createElement("p",null,m.createElement(u.Z,{id:"error.oauth_missing_code",defaultMessage:"The service provider {service} did not provide an authorization code in the redirect URL.",values:{service:a}})),m.createElement("p",null,m.createElement(u.Z,{id:"error.oauth_missing_code.google",defaultMessage:"For {link} make sure your administrator enabled the Google+ API.",values:{link:m.createElement(p.Z,{url:"https://docs.matterfoss.com/deployment/sso-google.html",messageId:(0,f.t)("error.oauth_missing_code.google.link"),defaultMessage:"Google Apps"})}})),m.createElement("p",null,m.createElement(u.Z,{id:"error.oauth_missing_code.office365",defaultMessage:"For {link} make sure the administrator of your Microsoft organization has enabled the MatterFOSS app.",values:{link:m.createElement(p.Z,{url:"https://docs.matterfoss.com/deployment/sso-office.html",messageId:(0,f.t)("error.oauth_missing_code.office365.link"),defaultMessage:"Office 365"})}})),m.createElement("p",null,m.createElement(u.Z,{id:"error.oauth_missing_code.gitlab",defaultMessage:"For {link} please make sure you followed the setup instructions.",values:{link:m.createElement(p.Z,{url:"https://docs.matterfoss.com/deployment/sso-gitlab.html",messageId:(0,f.t)("error.oauth_missing_code.gitlab.link"),defaultMessage:"GitLab"})}})),m.createElement("p",null,m.createElement(u.Z,{id:"error.oauth_missing_code.forum",defaultMessage:"If you reviewed the above and are still having trouble with configuration, you may post in our {link} where we'll be happy to help with issues during setup.",values:{link:m.createElement(p.Z,{url:"https://forum.matterfoss.org/c/trouble-shoot",messageId:(0,f.t)("error.oauth_missing_code.forum.link"),defaultMessage:"Troubleshooting forum"})}})));break;case g.vU.OAUTH_ACCESS_DENIED:s=m.createElement("p",null,m.createElement(u.Z,{id:"error.oauth_access_denied",defaultMessage:"You must authorize MatterFOSS to log in with {service}.",values:{service:a}}));break;case g.vU.OAUTH_INVALID_REDIRECT_URL:case g.vU.OAUTH_INVALID_PARAM:s=m.createElement("p",null,t);break;case g.vU.PAGE_NOT_FOUND:default:s=m.createElement("p",null,m.createElement(u.Z,{id:"error.not_found.message",defaultMessage:"The page you were trying to reach does not exist"}))}else s=t?m.createElement("p",null,t):m.createElement("p",null,m.createElement(u.Z,{id:"error.generic.message",defaultMessage:"An error has occurred."}));return s};N.propTypes={type:i().oneOfType([i().string,i().oneOf([null])]),message:i().string,service:i().string,isGuest:i().bool};const v=N;var U=a(80801);const M=a.p+"files/1f40904aa7bcdbd852202532e3c20a61.svg";var A=a(43610),O=a(43163),b=a(56417);const k=()=>((0,m.useEffect)((()=>{U.je.sendAdminUpgradeRequestEmailOnJoin()}),[]),m.createElement("div",{className:"ErrorPage__container_max_free_users"},m.createElement("header",{className:"ErrorPage__mattermostCloudImg"},m.createElement("img",{src:A.Z})),m.createElement("section",{className:"ErrorPage__mainContentContainer"},m.createElement("div",{className:"ErrorPage__mainContentItem"},m.createElement("img",{src:M,className:"ErrorPage__computerWithAlertImg"}),m.createElement("article",null,m.createElement("div",{className:"ErrorPage__maxFreeUsersReachedTitle"},m.createElement(u.Z,{id:"error.maxFreeUsersReached.title",defaultMessage:"This workspace has reached the user limit."})),m.createElement("div",{className:"ErrorPage__maxFreeUsersReachedDescription"},m.createElement(u.Z,{id:"error.maxFreeUsersReached.description",defaultMessage:"New users cannot be added to this workspace because it has reached the user limit for the free version of MatterFOSS. The system administrator has been notified"}))))),m.createElement("div",null,m.createElement("img",{className:"waves",src:O.Z}),m.createElement("img",{className:"blue-dots",src:b.Z}))));class T extends m.PureComponent{componentDidMount(){document.body.setAttribute("class","sticky error")}componentWillUnmount(){document.body.removeAttribute("class")}render(){const{isGuest:e}=this.props,t=new URLSearchParams(this.props.location.search),a=t.get("s");let r=!1;if(a){t.delete("s");const e="-----BEGIN PUBLIC KEY-----\n"+this.props.asymmetricSigningPublicKey+"\n-----END PUBLIC KEY-----",s=c.createVerify("sha256");s.update("/error?"+t.toString()),r=s.verify(e,a,"base64")}const s=t.get("type"),n=r&&t.get("title")||"",l=r&&t.get("message")||"",o=r&&t.get("service")||"",i=r&&t.get("returnTo")||"";let _;_=s===g.vU.PERMALINK_NOT_FOUND&&i?m.createElement(d.Link,{to:i},m.createElement(u.Z,{id:"error.generic.link",defaultMessage:"Back to MatterFOSS"})):s===g.vU.TEAM_NOT_FOUND?m.createElement(d.Link,{to:"/"},m.createElement(u.Z,{id:"error.generic.link",defaultMessage:"Back to {siteName}",values:{siteName:this.props.siteName}})):s===g.vU.CHANNEL_NOT_FOUND&&e?m.createElement(d.Link,{to:"/"},m.createElement(u.Z,{id:"error.channelNotFound.guest_link",defaultMessage:"Back"})):s===g.vU.CHANNEL_NOT_FOUND?m.createElement(d.Link,{to:t.get("returnTo")},m.createElement(u.Z,{id:"error.channelNotFound.link",defaultMessage:"Back to {defaultChannelName}",values:{defaultChannelName:g.gT.DEFAULT_CHANNEL_UI_NAME}})):s===g.vU.OAUTH_ACCESS_DENIED||s===g.vU.OAUTH_MISSING_CODE?m.createElement(d.Link,{to:"/"},m.createElement(u.Z,{id:"error.generic.link_login",defaultMessage:"Back to Login Page"})):s===g.vU.OAUTH_INVALID_PARAM||s===g.vU.OAUTH_INVALID_REDIRECT_URL?null:m.createElement(d.Link,{to:"/"},m.createElement(u.Z,{id:"error.generic.link",defaultMessage:"Back to {siteName}",values:{siteName:this.props.siteName}}));let f=m.createElement("div",{className:"container-fluid"},m.createElement("div",{className:"error__container"},m.createElement("div",{className:"error__icon"},m.createElement(E.Z,null)),m.createElement("h2",{"data-testid":"errorMessageTitle"},m.createElement(h,{type:s,title:n})),m.createElement(v,{type:s,message:l,service:o,isGuest:e}),_));return s===g.vU.MAX_FREE_USERS_REACHED&&(f=m.createElement(k,null)),m.createElement(m.Fragment,null,f)}}var y,I,S;y=T,I="propTypes",S={location:i().shape({search:i().string.isRequired}).isRequired,asymmetricSigningPublicKey:i().string,siteName:i().string,isGuest:i().bool},I in y?Object.defineProperty(y,I,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[I]=S;const Z=(0,r.connect)((function(e){const t=(0,s.iE)(e),a=(0,n.ts)(e);return{siteName:t.SiteName,asymmetricSigningPublicKey:t.AsymmetricSigningPublicKey,isGuest:Boolean(a&&(0,l.a_)(a))}}))(T)},80950:()=>{},46601:()=>{},89214:()=>{},8623:()=>{},7748:()=>{},85568:()=>{},56619:()=>{},77108:()=>{},52361:()=>{},94616:()=>{}}]);
//# sourceMappingURL=385.f36a9e19d46fea15c007.js.map