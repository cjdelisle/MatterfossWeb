(self.webpackChunkmattermost_webapp=self.webpackChunkmattermost_webapp||[]).push([[810],{96512:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c});var i=n(45697),s=n.n(i),a=(n(39714),n(67294)),o=n(44012),l=n(73727);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class c extends a.PureComponent{render(){return a.createElement("div",{id:"back_button",className:"signup-header"},a.createElement(l.Link,{onClick:this.props.onClick,to:this.props.url},a.createElement(o.Z,{id:"generic_icons.back",defaultMessage:"Back Icon"},(e=>a.createElement("span",{id:"back_button_icon",className:"fa fa-1x fa-angle-left",title:e.toString()}))),a.createElement(o.Z,{id:"web.header.back",defaultMessage:"Back"})))}}r(c,"propTypes",{url:s().string,onClick:s().func}),r(c,"defaultProps",{url:"/"})},49810:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R}),n(64765),n(33948),n(60285);var i=n(37703),s=n(14890),a=n(87271),o=n(27457),l=n(97254),r=n(3695),c=n(99206),p=n(28823),u=n(41609),d=n.n(u),m=(n(88674),n(39714),n(45697)),g=n.n(m),h=n(67294),b=n(44012),f=n(73727),E=n(80801),v=n(89262),S=n(34288),_=n(16406),L=n(47130),I=n(96512),w=n(95795),N=n(68492),k=n(19476),U=n(78274),A=n(82251);function T(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class Z extends h.PureComponent{constructor(e){super(e),T(this,"addUserToTeamFromInvite",(async(e,t)=>{const{data:n,error:i}=await this.props.actions.addUserToTeamFromInvite(e,t);n?v.m.push("/"+n.name+"/channels/".concat(U.gT.DEFAULT_CHANNEL)):i&&this.handleInvalidInvite(i)})),T(this,"getInviteInfo",(async e=>{const{data:t,error:n}=await this.props.actions.getTeamInviteInfo(e);t?this.setState({serverError:"",loading:!1}):n&&this.handleInvalidInvite(n)})),T(this,"handleInvalidInvite",(e=>{let t;t="store.sql_user.save.max_accounts.app_error"===e.server_error_id||"api.team.add_user_to_team_from_invite.guest.app_error"===e.server_error_id?e.message:h.createElement(b.Z,{id:"signup_user_completed.invalid_invite",defaultMessage:"The invite link was invalid.  Please speak with your Administrator to receive an invitation."}),this.setState({noOpenServerError:!0,loading:!1,serverError:t})})),T(this,"renderSignupControls",(()=>{let e=[];if(this.props.enableSignUpWithEmail&&e.push(h.createElement(f.Link,{className:"btn btn-custom-login btn--full email",key:"email",to:"/signup_email"+window.location.search},h.createElement("span",null,h.createElement(N.Z,{className:"icon fa fa-envelope",component:"span",title:{id:(0,A.t)("signup.email.icon"),defaultMessage:"Email Icon"}}),h.createElement(b.Z,{id:"signup.email",defaultMessage:"Email and Password"})))),this.props.enableSignUpWithGitLab&&e.push(h.createElement("a",{className:"btn btn-custom-login btn--full gitlab",key:"gitlab",href:E.je.getOAuthRoute()+"/gitlab/signup"+window.location.search},h.createElement("span",null,h.createElement("span",{className:"icon"}),h.createElement("span",null,h.createElement(b.Z,{id:"signup.gitlab",defaultMessage:"GitLab Single Sign-On"}))))),this.props.isLicensed&&this.props.enableSignUpWithGoogle&&e.push(h.createElement("a",{className:"btn btn-custom-login btn--full google",key:"google",href:E.je.getOAuthRoute()+"/google/signup"+window.location.search},h.createElement("span",null,h.createElement("span",{className:"icon"}),h.createElement("span",null,h.createElement(b.Z,{id:"signup.google",defaultMessage:"Google Account"}))))),this.props.isLicensed&&this.props.enableSignUpWithOffice365&&e.push(h.createElement("a",{className:"btn btn-custom-login btn--full office365",key:"office365",href:E.je.getOAuthRoute()+"/office365/signup"+window.location.search},h.createElement("span",null,h.createElement("span",{className:"icon"}),h.createElement("span",null,h.createElement(b.Z,{id:"signup.office365",defaultMessage:"Office 365"}))))),this.props.isLicensed&&this.props.enableSignUpWithOpenId){const t={};this.props.openidButtonColor&&(t.backgroundColor=this.props.openidButtonColor);let n=h.createElement(b.Z,{id:"login.openid",defaultMessage:"Open Id"});this.props.openidButtonText&&(n=this.props.openidButtonText),e.push(h.createElement("a",{id:"OpenIdButton",className:"btn btn-custom-login btn--full openid",style:t,key:"openid",href:E.je.getOAuthRoute()+"/openid/signup"+window.location.search},h.createElement("span",null,h.createElement("span",null,n))))}if(this.props.isLicensed&&this.props.enableLDAP){const t=new URLSearchParams(this.props.location.search);t.append("extra","create_ldap");const n="?"+t.toString();let i=h.createElement(b.Z,{id:"signup.ldap",defaultMessage:"AD/LDAP Credentials"});this.props.ldapLoginFieldName&&(i=this.props.ldapLoginFieldName),e.push(h.createElement(f.Link,{className:"btn btn-custom-login btn--full ldap",key:"ldap",to:"/login"+n},h.createElement("span",null,h.createElement(N.Z,{className:"icon fa fa-folder-open fa--margin-top",component:"span",title:{id:(0,A.t)("signup.ldap.icon"),defaultMessage:"AD/LDAP Icon"}}),h.createElement("span",null,i))))}if(this.props.isLicensed&&this.props.enableSAML){let t="";t=window.location.search?"&action=signup":"?action=signup",e.push(h.createElement(f.Link,{className:"btn btn-custom-login btn--full saml",key:"saml",to:"/login/sso/saml"+window.location.search+t},h.createElement("span",null,h.createElement(N.Z,{className:"icon fa fa-lock fa--margin-top",component:"span",title:{id:(0,A.t)("signup.saml.icon"),defaultMessage:"SAML Icon"}}),h.createElement("span",null,this.props.samlLoginButtonText))))}if(0===e.length){const t=h.createElement(b.Z,{id:"signup_user_completed.none",defaultMessage:"No user creation method has been enabled. Please contact an administrator for access."});e=h.createElement(w.Z,{error:t,margin:!0})}else if(1===e.length){if(this.props.enableSignUpWithEmail)return v.m.push("/signup_email"+window.location.search);if(this.props.isLicensed&&this.props.enableLDAP)return v.m.push("/login"+window.location.search)}return e}));let t=!1,n="",i=!1,s=!1;if(this.props.location.search){const a=new URLSearchParams(this.props.location.search);let o=a.get("t");null==o&&(o="");let l=a.get("id");null==l&&(l=""),l?t=!0:this.props.loggedIn?l||this.props.enableOpenServer||this.props.noAccounts||(i=!0,n=h.createElement(b.Z,{id:"signup_user_completed.no_open_server",defaultMessage:"This server does not allow open signups.  Please speak with your Administrator to receive an invitation."})):s=e.usedBefore}this.state={loading:t,serverError:n,noOpenServerError:i,usedBefore:s}}componentDidMount(){this.props.actions.removeGlobalItem("team");let e=!1;if(!d()(this.props.subscriptionStats)){const{is_paid_tier:t,remaining_seats:n}=this.props.subscriptionStats;e="false"===t&&n<=0}if(this.props.isCloud&&e)v.m.push("/error?type=max_free_users_reached");else if(this.props.location.search){const e=new URLSearchParams(this.props.location.search),t=e.get("t")||"",n=e.get("id")||"",i=this.props.loggedIn;(n||t)&&i?this.addUserToTeamFromInvite(t,n):n?this.getInviteInfo(n):i&&S.mc()}}render(){if(this.state.loading)return h.createElement(k.Z,null);if(this.state.usedBefore)return h.createElement("div",null,h.createElement(b.Z,{id:"signup_user_completed.expired",defaultMessage:"You've already completed the signup process for this invitation or this invitation has expired."}));let e,t=null;return this.state.serverError&&(t=h.createElement("div",{className:"form-group has-error"},h.createElement("label",{className:"control-label"},this.state.serverError))),e=this.state.noOpenServerError||this.state.usedBefore?null:this.renderSignupControls(),h.createElement("div",null,h.createElement(L.Z,null),h.createElement(I.Z,null),h.createElement("div",{className:"col-sm-12"},h.createElement("div",{className:"signup-team__container"},h.createElement("img",{alt:"signup team logo",className:"signup-team-logo",src:_.Z}),h.createElement("div",{className:"signup__content"},h.createElement("h1",null,this.props.siteName),h.createElement("h4",{className:"color--light"},h.createElement(b.Z,{id:"web.root.signup_info"})),h.createElement("div",{className:"mt-8"},h.createElement("h5",null,h.createElement("strong",null,h.createElement(b.Z,{id:"signup.title",defaultMessage:"Create an account with:"})))),e,t),h.createElement("span",{className:"color--light"},h.createElement(b.Z,{id:"signup_user_completed.haveAccount",defaultMessage:"Already have an account?"})," ",h.createElement(f.Link,{to:"/login"+this.props.location.search},h.createElement(b.Z,{id:"signup_user_completed.signIn",defaultMessage:"Click here to sign in."}))))))}}T(Z,"propTypes",{location:g().object,loggedIn:g().bool.isRequired,isLicensed:g().bool.isRequired,enableOpenServer:g().bool.isRequired,noAccounts:g().bool.isRequired,enableSignUpWithEmail:g().bool.isRequired,enableSignUpWithGitLab:g().bool.isRequired,enableSignUpWithGoogle:g().bool.isRequired,enableSignUpWithOffice365:g().bool.isRequired,enableSignUpWithOpenId:g().bool.isRequired,enableLDAP:g().bool.isRequired,enableSAML:g().bool.isRequired,samlLoginButtonText:g().string,siteName:g().string,usedBefore:g().string,ldapLoginFieldName:g().string.isRequired,openidButtonText:g().string,openidButtonColor:g().string,subscriptionStats:g().object,isCloud:g().bool,actions:g().shape({removeGlobalItem:g().func.isRequired,getTeamInviteInfo:g().func.isRequired,addUserToTeamFromInvite:g().func.isRequired}).isRequired});const R=(0,i.connect)((function(e,t){const n=(0,a.lJ)(e),i=(0,a.iE)(e),s=n&&"true"===n.Cloud,l=s?(0,a.F3)(e):{},c=n&&"true"===n.IsLicensed,p="true"===i.EnableOpenServer,u="true"===i.NoAccounts,d="true"===i.EnableSignUpWithEmail,m="true"===i.EnableSignUpWithGitLab,g="true"===i.EnableSignUpWithGoogle,h="true"===i.EnableSignUpWithOffice365,b="true"===i.EnableLdap,f="true"===i.EnableSaml,E=i.SamlLoginButtonText,v=i.LdapLoginFieldName,S=i.SiteName;let _;if(t.location.search){let n=new URLSearchParams(t.location.search).get("t");null==n&&(n=""),_=(0,r.Vx)(e,n,null)}return{loggedIn:Boolean((0,o.rc)(e)),isLicensed:c,isCloud:s,enableOpenServer:p,noAccounts:u,enableSignUpWithEmail:d,enableSignUpWithGitLab:m,enableSignUpWithGoogle:g,enableSignUpWithOffice365:h,enableLDAP:b,enableSAML:f,samlLoginButtonText:E,ldapLoginFieldName:v,siteName:S,usedBefore:_,subscriptionStats:l}}),(function(e){return{actions:(0,s.bindActionCreators)({removeGlobalItem:c.ul,getTeamInviteInfo:l.sS,addUserToTeamFromInvite:p.UI},e)}}))(Z)},16406:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});const i=n.p+"files/37ecfc86d48a22a44e9c13bb44bc7425.png"}}]);
//# sourceMappingURL=810.4d68664bae2685f34237.js.map